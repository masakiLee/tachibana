import{_ as g,m as l,a as d,r as x,o as i,c as r,d as v,b as t,t as e,F as p,l as k,e as P,f as m}from"./index-bafad075.js";import{P as w}from"./PageHeader-ccf5c00f.js";import{c as _}from"./cart-52672dbd.js";import{p as u}from"./payment-aa898e98.js";import{S as c}from"./sweetalert2.all-df747d5f.js";const{VITE_APP_URL:h,VITE_APP_PATH:b}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"tachibanazushi",BASE_URL:"/tachibana/",MODE:"production",DEV:!1,PROD:!0},S={data(){return{order:{user:{}},information:{},orderId:"",is_paid:"",toStringTotal:""}},methods:{...l(_,["getCart"]),getOrder(){const{id:a}=this.$route.params;this.$http.get(`${h}v2/api/${b}/order/${a}`).then(s=>{this.order=s.data.order,this.orderId=s.data.order.id,this.is_paid=s.data.order.is_paid,this.toStringTotal=s.data.order.total.toLocaleString("zh-TW")}).catch(()=>{c.fire({toast:!0,title:'<span style="color: #ff0000">獲取訂單失敗</span>',icon:"error",position:"top-end",showConfirmButton:!1,timer:1500,background:"#F2ECDD",color:"#000000"})})},...l(u,["setPaymentSuccess"]),payOrder(){const a=this.order;this.$http.post(`${h}v2/api/${b}/pay/${this.orderId}`,{data:a}).then(s=>{s.data.success&&(this.setPaymentSuccess(!0),this.$router.push("/cartComplete")),this.getCart(),c.fire({toast:!0,title:"已成功付款",icon:"success",position:"top-end",showConfirmButton:!1,timer:1500,background:"#F2ECDD",color:"#F25C05"})}).catch(()=>{c.fire({toast:!0,title:'<span style="color: #ff0000">付款失敗</span>',icon:"error",position:"top-end",showConfirmButton:!1,timer:1500,background:"#F2ECDD",color:"#000000"})})}},components:{PageHeader:w},mounted(){this.getOrder()},computed:{...d(_,["carts"]),...d(u,["success"])}},T={class:"section-cart bg-darkTwo py-8"},C={class:"container"},E={class:"bg-dark p-4"},V=m('<ul class="step d-flex mb-4 border-bottom border-3 border-primary"><li class="text-center py-2 flex-fill"><i class="bi bi-check-square text-success"></i> 購物車 </li><li class="text-center py-2 flex-fill"><i class="bi bi-check-square text-success"></i> 結帳資訊 </li><li class="text-center py-2 flex-fill bg-primary stepList"><i class="bi bi-3-square"></i> 付款方式 </li></ul>',1),D={class:"row"},A={class:"col-lg-8 order-2 order-lg-1"},I=m('<p class="pb-4 border-bottom border-3 info mb-4">請選擇付款方式</p><div class="selete"><div class="row"><div class="col-4"><input type="radio" class="btn-check" name="options" id="option1" autocomplete="off" checked><label class="btn btn-outline-primary w-100 h-100 d-flex flex-column" for="option1"><i class="bi bi-credit-card"></i><span class="bi-text">信用卡</span></label></div><div class="col-4"><input type="radio" class="btn-check" name="options" id="option2" autocomplete="off"><label class="btn btn-outline-primary w-100 h-100 d-flex flex-column" for="option2"><i class="bi bi-cash"></i><span class="bi-text">現金</span></label></div><div class="col-4"><input type="radio" class="btn-check" name="options" id="option4" autocomplete="off"><label class="btn btn-outline-primary w-100 h-100 d-flex flex-column" for="option4"><i class="bi bi-qr-code-scan"></i><span class="bi-text">行動支付</span></label></div></div></div>',2),B={class:"information mt-4"},$={class:"table table-darkTwo table-hover"},q=t("td",{colspan:"2"},"訂單編號",-1),F={colspan:"2"},O=t("td",{colspan:"2"},"收件人姓名",-1),H={colspan:"2"},N=t("td",{colspan:"2"},"收件人電話",-1),L={colspan:"2"},R=t("td",{colspan:"2"},"收件人地址",-1),j={colspan:"2"},U=t("td",{colspan:"2"},"Email",-1),z={colspan:"2"},M=t("td",{colspan:"2"},"付款狀態",-1),W={key:0,colspan:"2"},G={key:1,colspan:"2",class:"text-primary"},J={class:"col-lg-4 order-1 order-lg-2 mb-4 mb-lg-0"},K=t("p",{class:"pb-4 border-bottom border-3 info"},"訂單資訊",-1),Q={class:"bg-darkTwo pt-4 pb-3"},X={class:"title"},Y={class:"num"},Z={class:"amount d-flex justify-content-between border-top border-3 pt-3"},tt=t("span",null,"總計：",-1),st={class:"d-flex justify-content-end next"},ot=t("i",{class:"bi bi-arrow-right-square"},null,-1);function et(a,s,it,rt,o,f){const y=x("PageHeader");return i(),r(p,null,[v(y),t("section",T,[t("div",C,[t("div",E,[V,t("div",D,[t("div",A,[I,t("div",B,[t("table",$,[t("thead",null,[t("tr",null,[q,t("td",F,e(o.orderId),1)])]),t("tbody",null,[t("tr",null,[O,t("td",H,e(o.order.user.name),1)]),t("tr",null,[N,t("td",L,e(o.order.user.tel),1)]),t("tr",null,[R,t("td",j,e(o.order.user.address),1)]),t("tr",null,[U,t("td",z,e(o.order.user.email),1)]),t("tr",null,[M,o.is_paid?(i(),r("td",W,"已付款")):(i(),r("td",G,"未付款"))])])])])]),t("div",J,[K,t("div",Q,[(i(!0),r(p,null,k(o.order.products,n=>(i(),r("div",{class:"ordertext d-flex justify-content-between px-3 mb-1",key:n.id},[t("p",X,e(n.product.title),1),t("p",Y,"× "+e(n.qty),1)]))),128))]),t("div",Z,[tt,t("span",null,"NT$ "+e(o.toStringTotal),1)])])]),t("div",st,[t("button",{type:"button",class:"btn btn-danger text-white btn-lg",onClick:s[0]||(s[0]=n=>f.payOrder())},[P(" 確認交易 "),ot])])])])])],64)}const pt=g(S,[["render",et]]);export{pt as default};
