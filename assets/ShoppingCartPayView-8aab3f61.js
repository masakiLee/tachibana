import{_ as w,m as l,a as d,r as p,o as i,c as r,d as _,b as t,t as e,F as u,l as P,w as C,e as h,f as g}from"./index-f4935e05.js";import{P as S}from"./PageHeader-5a5118e8.js";import{c as b}from"./cart-9b562778.js";import{p as m}from"./payment-355400ea.js";import{S as c}from"./sweetalert2.all-82dbf304.js";const{VITE_APP_URL:f,VITE_APP_PATH:y}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"tachibanazushi",BASE_URL:"/tachibana/",MODE:"production",DEV:!1,PROD:!0},T={data(){return{order:{user:{}},information:{},orderId:"",is_paid:"",toStringTotal:""}},methods:{...l(b,["getCart"]),getOrder(){const{id:a}=this.$route.params;this.$http.get(`${f}v2/api/${y}/order/${a}`).then(s=>{this.order=s.data.order,this.orderId=s.data.order.id,this.is_paid=s.data.order.is_paid,this.toStringTotal=s.data.order.total.toLocaleString("zh-TW")}).catch(()=>{c.fire({toast:!0,title:'<span style="color: #ff0000">獲取訂單失敗</span>',icon:"error",position:"top-end",showConfirmButton:!1,timer:1500,background:"#F2ECDD",color:"#000000"})})},...l(m,["setPaymentSuccess"]),payOrder(){const a=this.order;this.$http.post(`${f}v2/api/${y}/pay/${this.orderId}`,{data:a}).then(s=>{s.data.success&&(this.setPaymentSuccess(!0),this.$router.push("/cartComplete")),this.getCart(),c.fire({toast:!0,title:"已成功付款",icon:"success",position:"top-end",showConfirmButton:!1,timer:1500,background:"#F2ECDD",color:"#F25C05"})}).catch(()=>{c.fire({toast:!0,title:'<span style="color: #ff0000">付款失敗</span>',icon:"error",position:"top-end",showConfirmButton:!1,timer:1500,background:"#F2ECDD",color:"#000000"})})}},components:{PageHeader:S},mounted(){this.getOrder()},computed:{...d(b,["carts"]),...d(m,["success"])}},E={class:"section-cart bg-darkTwo py-8"},V={class:"container"},D={class:"bg-dark p-4"},A=g('<ul class="step d-flex mb-4 border-bottom border-3 border-primary"><li class="text-center py-2 flex-fill"><i class="bi bi-check-square text-success"></i> 購物車 </li><li class="text-center py-2 flex-fill"><i class="bi bi-check-square text-success"></i> 結帳資訊 </li><li class="text-center py-2 flex-fill bg-primary stepList"><i class="bi bi-3-square"></i> 付款方式 </li></ul>',1),I={class:"row"},q={class:"col-lg-8 order-2 order-lg-1"},B=g('<p class="pb-4 border-bottom border-3 info mb-4">請選擇付款方式</p><div class="selete"><div class="row"><div class="col-4"><input type="radio" class="btn-check" name="options" id="option1" autocomplete="off" checked><label class="btn btn-outline-primary w-100 h-100 d-flex flex-column" for="option1"><i class="bi bi-credit-card"></i><span class="bi-text">信用卡</span></label></div><div class="col-4"><input type="radio" class="btn-check" name="options" id="option2" autocomplete="off"><label class="btn btn-outline-primary w-100 h-100 d-flex flex-column" for="option2"><i class="bi bi-cash"></i><span class="bi-text">現金</span></label></div><div class="col-4"><input type="radio" class="btn-check" name="options" id="option4" autocomplete="off"><label class="btn btn-outline-primary w-100 h-100 d-flex flex-column" for="option4"><i class="bi bi-qr-code-scan"></i><span class="bi-text">行動支付</span></label></div></div></div>',2),$={class:"information mt-4"},F={class:"table table-darkTwo table-hover"},L=t("td",{colspan:"2"},"訂單編號",-1),O={colspan:"2"},R=t("td",{colspan:"2"},"收件人姓名",-1),H={colspan:"2"},N=t("td",{colspan:"2"},"收件人電話",-1),j={colspan:"2"},U=t("td",{colspan:"2"},"收件人地址",-1),z={colspan:"2"},M=t("td",{colspan:"2"},"Email",-1),W={colspan:"2"},G=t("td",{colspan:"2"},"付款狀態",-1),J={key:0,colspan:"2"},K={key:1,colspan:"2",class:"text-primary"},Q={class:"col-lg-4 order-1 order-lg-2 mb-4 mb-lg-0"},X=t("p",{class:"pb-4 border-bottom border-3 info"},"訂單資訊",-1),Y={class:"bg-darkTwo pt-4 pb-3"},Z={class:"title"},tt={class:"num"},st={class:"amount d-flex justify-content-between border-top border-3 pt-3"},ot=t("span",null,"總計：",-1),et={class:"d-flex justify-content-between next"},it=t("i",{class:"bi bi-arrow-left-square"},null,-1),rt=t("i",{class:"bi bi-arrow-right-square"},null,-1);function at(a,s,nt,ct,o,x){const v=p("PageHeader"),k=p("RouterLink");return i(),r(u,null,[_(v),t("section",E,[t("div",V,[t("div",D,[A,t("div",I,[t("div",q,[B,t("div",$,[t("table",F,[t("thead",null,[t("tr",null,[L,t("td",O,e(o.orderId),1)])]),t("tbody",null,[t("tr",null,[R,t("td",H,e(o.order.user.name),1)]),t("tr",null,[N,t("td",j,e(o.order.user.tel),1)]),t("tr",null,[U,t("td",z,e(o.order.user.address),1)]),t("tr",null,[M,t("td",W,e(o.order.user.email),1)]),t("tr",null,[G,o.is_paid?(i(),r("td",J,"已付款")):(i(),r("td",K,"未付款"))])])])])]),t("div",Q,[X,t("div",Y,[(i(!0),r(u,null,P(o.order.products,n=>(i(),r("div",{class:"ordertext d-flex justify-content-between px-3 mb-1",key:n.id},[t("p",Z,e(n.product.title),1),t("p",tt,"× "+e(n.qty),1)]))),128))]),t("div",st,[ot,t("span",null,"NT$ "+e(o.toStringTotal),1)])])]),t("div",et,[_(k,{to:"/shoppingCartCheck",type:"button",class:"btn btn-outline-light btn-lg"},{default:C(()=>[it,h(" 回上頁 ")]),_:1}),t("button",{type:"button",class:"btn btn-danger text-white btn-lg",onClick:s[0]||(s[0]=n=>x.payOrder())},[h(" 確認交易 "),rt])])])])])],64)}const ht=w(T,[["render",at]]);export{ht as default};
