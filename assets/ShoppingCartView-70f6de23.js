import{_ as C,m as b,a as c,r as w,o,c as a,d as h,b as t,e as p,t as i,F as g,l as y,H as x,K as T,w as v,f as P,I as S,p as I,h as $}from"./index-f4935e05.js";import{P as V}from"./PageHeader-5a5118e8.js";import{c as n}from"./cart-9b562778.js";import{S as L}from"./sweetalert2.all-82dbf304.js";const{VITE_APP_URL:E,VITE_APP_PATH:q}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"tachibanazushi",BASE_URL:"/tachibana/",MODE:"production",DEV:!1,PROD:!0},N={data(){return{likes:[]}},methods:{...b(n,["getCart"]),...b(n,["updateCartItem"]),...b(n,["deleteCartItem"]),...b(n,["useCoupon"]),...b(n,["addToCart"]),getLikes(){this.$http.get(`${E}v2/api/${q}/products/all`).then(e=>{const d=e.data.products,f=Object.keys(d).length,_=[];for(;_.length<5;){const r=Math.floor(Math.random()*f);_.includes(r)||_.push(r)}this.likes=_.map(r=>d[r])}).catch(()=>{L.fire({toast:!0,title:'<span style="color: #ff0000">獲取顧客常看商品錯誤</span>',icon:"error",position:"top-end",showConfirmButton:!1,timer:1500,background:"#F2ECDD",color:"#000000"})})}},components:{PageHeader:V},computed:{...c(n,["carts"]),...c(n,["total"]),...c(n,["final_total"]),...c(n,["copuon"]),...c(n,["hasCoupon"]),...c(n,["order"])},mounted(){this.getLikes()},watch:{}},u=e=>(I("data-v-1b161408"),e=e(),$(),e),U={class:"section-cart bg-darkTwo py-8"},A={class:"container"},D={class:"bg-dark p-4 text-center"},H=P('<ul class="step d-flex mb-4 border-bottom border-3 border-primary" data-v-1b161408><li class="text-center bg-primary py-2 stepList flex-fill" data-v-1b161408><i class="bi bi-1-square" data-v-1b161408></i> 購物車 </li><li class="text-center py-2 flex-fill" data-v-1b161408><i class="bi bi-2-square" data-v-1b161408></i> 結帳資訊 </li><li class="text-center py-2 flex-fill" data-v-1b161408><i class="bi bi-3-square" data-v-1b161408></i> 付款方式 </li></ul>',1),R={key:0,class:"cart-info table-responsive"},B={class:"table table-dark table-hover align-middle caption-top"},M={class:"pb-4 text-white"},O={class:"text-danger"},j=u(()=>t("thead",null,[t("tr",null,[t("td"),t("td"),t("td",{class:"text-start"},"品名"),t("td",null,"數量"),t("td",{class:"text-end pe-4"},"金額")])],-1)),z=["onClick"],F=u(()=>t("i",{class:"bi bi-x-square text-primary"},null,-1)),W=[F],K={class:"img bg-darkTwo d-flex justify-content-center align-items-center"},G=["src"],J={class:"text-start"},Q=["onUpdate:modelValue","onChange"],X=["value"],Y={class:"text-end"},Z={class:"input-group mb-4"},tt=["disabled"],et={key:0,class:"btn btn-primary btn-lg text-white",type:"button",id:"button-addon2",disabled:""},st={class:"text-end total"},ot={key:0},at={key:1},nt={class:"d-flex justify-content-between mt-4 next"},lt=u(()=>t("i",{class:"bi bi-arrow-left-square"},null,-1)),it=u(()=>t("i",{class:"bi bi-arrow-right-square"},null,-1)),dt={key:1},rt=u(()=>t("p",{class:"text-center py-8"},"購物車無選購商品，快去選購！",-1)),ct={class:"bg-dark mt-4 py-4"},pt=u(()=>t("p",{class:"like text-center py-2 mb-4 bg-darkTwo"},"其他顧客都在看",-1)),ut={class:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-4 g-md-6"},_t={class:"box bg-dark text-white"},bt={class:"title p-3"},ht={class:"bgOrange ms-auto"},mt=["src","alt"],gt={class:"price bg-danger py-1 px-2 ms-3"},yt={class:"mark d-flex justify-content-evenly align-items-center"},vt=["onClick"];function ft(e,d,f,_,r,wt){const k=w("PageHeader"),m=w("RouterLink");return o(),a(g,null,[h(k),t("section",U,[t("div",A,[t("div",D,[H,!e.carts.length==0?(o(),a("div",R,[t("table",B,[t("caption",M,[p(" 購物車中有 "),t("span",O,i(e.carts.length),1),p(" 項商品 ")]),j,t("tbody",null,[(o(!0),a(g,null,y(e.carts,s=>(o(),a("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn delCart my-auto text-center",onClick:l=>e.deleteCartItem(s),"data-swal-toast-template":"#my-template"},W,8,z)]),t("td",null,[t("div",K,[t("img",{src:s.product.imageUrl,alt:"orderProImg",class:"cartProImg p-2"},null,8,G)])]),t("td",J,i(s.product.title),1),t("td",null,[x(t("select",{name:"",id:"",class:"form-select py-0","onUpdate:modelValue":l=>s.qty=l,onChange:l=>e.updateCartItem(s)},[(o(),a(g,null,y(20,l=>t("option",{value:l,key:l},i(l),9,X)),64))],40,Q),[[S,s.qty]])]),t("td",Y,"NT$ "+i(s.total.toLocaleString("zh-TW")),1)]))),128))])]),t("div",Z,[x(t("input",{type:"text",class:"form-control text-white",placeholder:"輸入OPENSUSHI享8折優惠","onUpdate:modelValue":d[0]||(d[0]=s=>e.copuon.code=s),disabled:e.hasCoupon},null,8,tt),[[T,e.copuon.code]]),e.hasCoupon?(o(),a("button",et," 已使用 ")):(o(),a("button",{key:1,class:"btn btn-primary btn-lg text-white",type:"button",id:"button-addon2",onClick:d[1]||(d[1]=s=>e.useCoupon())}," 使用 "))]),t("div",st,[p(" 總金額： "),e.hasCoupon?(o(),a("span",ot,"NT$ "+i((e.total*.8).toLocaleString("zh-TW")),1)):(o(),a("span",at,"NT$ "+i(e.total.toLocaleString("zh-TW")),1))]),t("div",nt,[h(m,{to:"products",type:"button",class:"btn btn-outline-light btn-lg"},{default:v(()=>[lt,p(" 繼續購物 ")]),_:1}),h(m,{to:"shoppingCartCheck",type:"button",class:"btn btn-danger text-white btn-lg"},{default:v(()=>[p(" 結帳去 "),it]),_:1})])])):(o(),a("div",dt,[rt,h(m,{to:"products",type:"button",class:"btn btn-outline-primary text-white btn-lg"},{default:v(()=>[p(" 繼續購物 ")]),_:1}),t("div",ct,[pt,t("div",ut,[(o(!0),a(g,null,y(r.likes,s=>(o(),a("div",{class:"col",key:s.id},[t("div",_t,[t("h3",bt,i(s.title),1),t("div",ht,[t("img",{src:s.imageUrl,alt:s.title,class:"pic"},null,8,mt)]),t("span",gt," NT$ "+i(s.price),1),t("div",yt,[h(m,{to:`product/${s.id}`,type:"button",class:"bi bi-search border border-3 px-2 rounded-3"},null,8,["to"]),t("button",{type:"button",class:"bi bi-cart-dash border border-primary border-3 bg-primary px-2 rounded-3 text-white",onClick:l=>e.addToCart(s.id,e.qty)},null,8,vt)])])]))),128))])])]))])])])],64)}const Pt=C(N,[["render",ft],["__scopeId","data-v-1b161408"]]);export{Pt as default};
