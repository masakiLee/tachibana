import{_ as C,m as b,a as r,r as x,o as a,c as n,d as h,b as t,e as p,t as d,F as g,l as f,H as w,K as P,w as y,f as S,I as T,p as I,h as V}from"./index-0f56dcbe.js";import{P as $}from"./PageHeader-9767d5df.js";import{c as o}from"./cart-23c07924.js";import{S as L}from"./sweetalert2.all-fa0eb958.js";const{VITE_APP_URL:E,VITE_APP_PATH:U}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"tachibanazushi",BASE_URL:"/tachibana/",MODE:"production",DEV:!1,PROD:!0},q={data(){return{likes:[]}},methods:{...b(o,["getCart"]),...b(o,["updateCartItem"]),...b(o,["deleteCartItem"]),...b(o,["useCoupon"]),...b(o,["addToCart"]),getLikes(){this.$http.get(`${E}v2/api/${U}/products/all`).then(s=>{const l=s.data.products,v=Object.keys(l).length,_=[];for(;_.length<5;){const c=Math.floor(Math.random()*v);_.includes(c)||_.push(c)}this.likes=_.map(c=>l[c])}).catch(()=>{L.fire({toast:!0,title:'<span style="color: #ff0000">獲取顧客常看商品錯誤</span>',icon:"error",position:"top-end",showConfirmButton:!1,timer:1500,background:"#F2ECDD",color:"#000000"})})}},components:{PageHeader:$},computed:{...r(o,["carts"]),...r(o,["total"]),...r(o,["final_total"]),...r(o,["copuon"]),...r(o,["hasCoupon"]),...r(o,["order"])},mounted(){this.getLikes()},watch:{}},u=s=>(I("data-v-0e3dbab7"),s=s(),V(),s),A={class:"section-cart bg-darkTwo py-8"},N={class:"container"},D={class:"bg-dark p-4 text-center"},H=S('<ul class="step d-flex mb-4 border-bottom border-3 border-primary" data-v-0e3dbab7><li class="text-center bg-primary py-2 stepList flex-fill" data-v-0e3dbab7><i class="bi bi-1-square" data-v-0e3dbab7></i> 購物車 </li><li class="text-center py-2 flex-fill" data-v-0e3dbab7><i class="bi bi-2-square" data-v-0e3dbab7></i> 結帳資訊 </li><li class="text-center py-2 flex-fill" data-v-0e3dbab7><i class="bi bi-3-square" data-v-0e3dbab7></i> 付款方式 </li></ul>',1),R={key:0,class:"cart-info table-responsive"},B={class:"table table-dark table-hover align-middle caption-top"},M={class:"pb-4 text-white"},O={class:"text-danger"},j=u(()=>t("thead",null,[t("tr",null,[t("td"),t("td"),t("td",{class:"text-start"},"品名"),t("td",null,"數量"),t("td",{class:"text-end pe-4"},"金額")])],-1)),z=["onClick"],F=u(()=>t("i",{class:"bi bi-x-square text-primary"},null,-1)),W=[F],K={class:"img bg-darkTwo d-flex justify-content-center align-items-center"},G=["src"],J={class:"text-start"},Q=["onUpdate:modelValue","onChange"],X=["value"],Y={class:"text-end"},Z={class:"input-group mb-4"},tt={class:"text-end total"},et={class:"d-flex justify-content-between mt-4 next"},st=u(()=>t("i",{class:"bi bi-arrow-left-square"},null,-1)),ot=u(()=>t("i",{class:"bi bi-arrow-right-square"},null,-1)),at={key:1},nt=u(()=>t("p",{class:"text-center py-8"},"購物車無選購商品，快去選購！",-1)),lt={class:"bg-dark mt-4 py-4"},it=u(()=>t("p",{class:"like text-center py-2 mb-4 bg-darkTwo"},"其他顧客都在看",-1)),dt={class:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-4 g-md-6"},ct={class:"box bg-dark text-white"},rt={class:"title p-3"},pt={class:"bgOrange ms-auto"},ut=["src","alt"],_t={class:"price bg-danger py-1 px-2 ms-3"},bt={class:"mark d-flex justify-content-evenly align-items-center"};function ht(s,l,v,_,c,mt){const k=x("PageHeader"),m=x("RouterLink");return a(),n(g,null,[h(k),t("section",A,[t("div",N,[t("div",D,[H,!s.carts.length==0?(a(),n("div",R,[t("table",B,[t("caption",M,[p(" 購物車中有 "),t("span",O,d(s.carts.length),1),p(" 項商品 ")]),j,t("tbody",null,[(a(!0),n(g,null,f(s.carts,e=>(a(),n("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn delCart my-auto text-center",onClick:i=>s.deleteCartItem(e),"data-swal-toast-template":"#my-template"},W,8,z)]),t("td",null,[t("div",K,[t("img",{src:e.product.imageUrl,alt:"orderProImg",class:"cartProImg p-2"},null,8,G)])]),t("td",J,d(e.product.title),1),t("td",null,[w(t("select",{name:"",id:"",class:"form-select py-0","onUpdate:modelValue":i=>e.qty=i,onChange:i=>s.updateCartItem(e)},[(a(),n(g,null,f(20,i=>t("option",{value:i,key:i},d(i),9,X)),64))],40,Q),[[T,e.qty]])]),t("td",Y," NT$ "+d(e.total.toLocaleString("zh-TW")),1)]))),128))])]),t("div",Z,[w(t("input",{type:"text",class:"form-control text-white",placeholder:"輸入OPENSUSHI享8折優惠","onUpdate:modelValue":l[0]||(l[0]=e=>s.copuon.code=e)},null,512),[[P,s.copuon.code]]),t("button",{class:"btn btn-primary btn-lg text-white",type:"button",id:"button-addon2",onClick:l[1]||(l[1]=e=>s.useCoupon())}," 使用 ")]),t("div",tt,[p(" 總金額："),t("span",null,"NT$ "+d(s.final_total.toLocaleString("zh-TW")),1)]),t("div",et,[h(m,{to:"products",type:"button",class:"btn btn-outline-light btn-lg"},{default:y(()=>[st,p(" 繼續購物 ")]),_:1}),h(m,{to:"shoppingCartCheck",type:"button",class:"btn btn-danger text-white btn-lg"},{default:y(()=>[p(" 結帳去 "),ot]),_:1})])])):(a(),n("div",at,[nt,h(m,{to:"products",type:"button",class:"btn btn-outline-primary text-white btn-lg"},{default:y(()=>[p(" 繼續購物 ")]),_:1}),t("div",lt,[it,t("div",dt,[(a(!0),n(g,null,f(c.likes,e=>(a(),n("div",{class:"col",key:e.id},[t("div",ct,[t("h3",rt,d(e.title),1),t("div",pt,[t("img",{src:e.imageUrl,alt:e.title,class:"pic"},null,8,ut)]),t("span",_t," NT$ "+d(e.price),1),t("div",bt,[h(m,{to:`product/${e.id}`,type:"button",class:"bi bi-search border border-3 px-2 rounded-3"},null,8,["to"])])])]))),128))])])]))])])])],64)}const xt=C(q,[["render",ht],["__scopeId","data-v-0e3dbab7"]]);export{xt as default};
