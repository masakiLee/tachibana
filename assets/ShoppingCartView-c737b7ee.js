import{_ as C,m as h,a as d,r as x,o as l,c as i,d as b,b as t,e as p,t as c,F as g,l as y,H as w,K as P,w as f,f as T,I as S,p as I,h as V}from"./index-0e2b8556.js";import{P as $}from"./PageHeader-876cb584.js";import{c as o}from"./cart-df17a1b7.js";import{S as L}from"./sweetalert2.all-d1f684b7.js";const{VITE_APP_URL:E,VITE_APP_PATH:q}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"tachibanazushi",BASE_URL:"/tachibana/",MODE:"production",DEV:!1,PROD:!0},U={data(){return{likes:[]}},methods:{...h(o,["getCart"]),...h(o,["updateCartItem"]),...h(o,["deleteCartItem"]),...h(o,["useCoupon"]),...h(o,["addToCart"]),getLikes(){this.$http.get(`${E}v2/api/${q}/products/all`).then(e=>{const a=e.data.products,v=Object.keys(a).length,_=[];for(;_.length<5;){const r=Math.floor(Math.random()*v);_.includes(r)||_.push(r)}this.likes=_.map(r=>a[r])}).catch(()=>{L.fire({toast:!0,title:'<span style="color: #ff0000">獲取顧客常看商品錯誤</span>',icon:"error",position:"top-end",showConfirmButton:!1,timer:1500,background:"#F2ECDD",color:"#000000"})})}},components:{PageHeader:$},computed:{...d(o,["carts"]),...d(o,["total"]),...d(o,["final_total"]),...d(o,["copuon"]),...d(o,["hasCoupon"]),...d(o,["order"])},mounted(){this.getLikes()},watch:{}},u=e=>(I("data-v-ee64c7c0"),e=e(),V(),e),A={class:"section-cart bg-darkTwo py-8"},N={class:"container"},D={class:"bg-dark p-4 text-center"},H=T('<ul class="step d-flex mb-4 border-bottom border-3 border-primary" data-v-ee64c7c0><li class="text-center bg-primary py-2 stepList flex-fill" data-v-ee64c7c0><i class="bi bi-1-square" data-v-ee64c7c0></i> 購物車 </li><li class="text-center py-2 flex-fill" data-v-ee64c7c0><i class="bi bi-2-square" data-v-ee64c7c0></i> 結帳資訊 </li><li class="text-center py-2 flex-fill" data-v-ee64c7c0><i class="bi bi-3-square" data-v-ee64c7c0></i> 付款方式 </li></ul>',1),R={key:0,class:"cart-info table-responsive"},B={class:"table table-dark table-hover align-middle caption-top"},M={class:"pb-4 text-white"},O={class:"text-danger"},j=u(()=>t("thead",null,[t("tr",null,[t("td"),t("td"),t("td",{class:"text-start"},"品名"),t("td",null,"數量"),t("td",{class:"text-end pe-4"},"金額")])],-1)),z=["onClick"],F=u(()=>t("i",{class:"bi bi-x-square text-primary"},null,-1)),W=[F],K={class:"img bg-darkTwo d-flex justify-content-center align-items-center"},G=["src"],J={class:"text-start"},Q=["onUpdate:modelValue","onChange"],X=["value"],Y={class:"text-end"},Z={class:"input-group mb-4"},tt={class:"text-end total"},et={class:"d-flex justify-content-between mt-4 next"},st=u(()=>t("i",{class:"bi bi-arrow-left-square"},null,-1)),ot=u(()=>t("i",{class:"bi bi-arrow-right-square"},null,-1)),at={key:1},nt=u(()=>t("p",{class:"text-center py-8"},"購物車無選購商品，快去選購！",-1)),lt={class:"bg-dark mt-4 py-4"},it=u(()=>t("p",{class:"like text-center py-2 mb-4 bg-darkTwo"},"其他顧客都在看",-1)),ct={class:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-4 g-md-6"},rt={class:"box bg-dark text-white"},dt={class:"title p-3"},pt={class:"bgOrange ms-auto"},ut=["src","alt"],_t={class:"price bg-danger py-1 px-2 ms-3"},ht={class:"mark d-flex justify-content-evenly align-items-center"};function bt(e,a,v,_,r,mt){const k=x("PageHeader"),m=x("RouterLink");return l(),i(g,null,[b(k),t("section",A,[t("div",N,[t("div",D,[H,!e.carts.length==0?(l(),i("div",R,[t("table",B,[t("caption",M,[p(" 購物車中有 "),t("span",O,c(e.carts.length),1),p(" 項商品 ")]),j,t("tbody",null,[(l(!0),i(g,null,y(e.carts,s=>(l(),i("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn delCart my-auto text-center",onClick:n=>e.deleteCartItem(s),"data-swal-toast-template":"#my-template"},W,8,z)]),t("td",null,[t("div",K,[t("img",{src:s.product.imageUrl,alt:"orderProImg",class:"cartProImg p-2"},null,8,G)])]),t("td",J,c(s.product.title),1),t("td",null,[w(t("select",{name:"",id:"",class:"form-select py-0","onUpdate:modelValue":n=>s.qty=n,onChange:n=>e.updateCartItem(s)},[(l(),i(g,null,y(20,n=>t("option",{value:n,key:n},c(n),9,X)),64))],40,Q),[[S,s.qty]])]),t("td",Y," NT$ "+c(s.total.toLocaleString("zh-TW")),1)]))),128))])]),t("div",Z,[w(t("input",{type:"text",class:"form-control text-white",placeholder:"輸入OPENSUSHI享8折優惠","onUpdate:modelValue":a[0]||(a[0]=s=>e.copuon.code=s)},null,512),[[P,e.copuon.code]]),t("button",{class:"btn btn-primary btn-lg text-white",type:"button",id:"button-addon2",onClick:a[1]||(a[1]=s=>e.useCoupon())}," 使用 ")]),t("div",tt,[p(" 總金額："),t("span",null,"NT$ "+c(e.final_total.toLocaleString("zh-TW")),1)]),t("div",et,[b(m,{to:"products",type:"button",class:"btn btn-outline-light btn-lg"},{default:f(()=>[st,p(" 繼續購物 ")]),_:1}),b(m,{to:"shoppingCartCheck",type:"button",class:"btn btn-danger text-white btn-lg"},{default:f(()=>[p(" 結帳去 "),ot]),_:1})])])):(l(),i("div",at,[nt,b(m,{to:"products",type:"button",class:"btn btn-outline-primary text-white btn-lg"},{default:f(()=>[p(" 繼續購物 ")]),_:1}),t("div",lt,[it,t("div",ct,[(l(!0),i(g,null,y(r.likes,s=>(l(),i("div",{class:"col",key:s.id},[t("div",rt,[t("h3",dt,c(s.title),1),t("div",pt,[t("img",{src:s.imageUrl,alt:s.title,class:"pic"},null,8,ut)]),t("span",_t," NT$ "+c(s.price),1),t("div",ht,[b(m,{to:`product/${s.id}`,type:"button",class:"bi bi-search border border-3 px-2 rounded-3"},null,8,["to"]),t("button",{type:"button",class:"bi bi-cart-dash border border-primary border-3 bg-primary px-2 rounded-3 text-white",onClick:a[2]||(a[2]=n=>e.addToCart(e.products.id,e.qty))})])])]))),128))])])]))])])])],64)}const xt=C(U,[["render",bt],["__scopeId","data-v-ee64c7c0"]]);export{xt as default};
